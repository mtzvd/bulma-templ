// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package elements

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"fmt"
	"strings"
)

// Items defines a list of templ components used for
// explicit multi-child composition.
//
// This type exists to avoid excessive templ.Join usage
// and to better match Bulma's structural patterns.
type Items []templ.Component

// Render outputs all components contained in the Items list
// in declaration order.
//
// Render MUST be called explicitly by container components
// that accept Items as their content model.
func (i Items) Render() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		for _, item := range i {
			templ_7745c5c3_Err = item.Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		return nil
	})
}

// BaseElementProps defines common rendering parameters
// for generic HTML container elements.
type BaseElementProps struct {
	// Tag defines the HTML tag name to render.
	Tag string

	// BaseClasses defines CSS classes
	// applied by the component itself.
	BaseClasses []string

	// Attr contains additional HTML attributes.
	Attr templ.Attributes
}

// BaseElement — generic HTML container.
// Atomic level: ATOM
//
// BaseElement renders a generic HTML element with unified
// class and attribute handling.
func BaseElement(props BaseElementProps, content Items) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var2 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var2 == nil {
			templ_7745c5c3_Var2 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = Wrap(
			WrapProps{
				Tag:     props.Tag,
				Classes: props.BaseClasses,
				Attr:    props.Attr,
			},
			content,
		).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

// WrapProps defines parameters for Wrap.
type WrapProps struct {
	Tag     string
	Classes []string
	Attr    templ.Attributes
}

// escapeAttribute escapes a string for safe usage
// inside an HTML attribute value.
func escapeAttribute(s string) string {
	var b strings.Builder
	for _, r := range s {
		switch r {
		case '&':
			b.WriteString("&amp;")
		case '"':
			b.WriteString("&quot;")
		case '\'':
			b.WriteString("&#39;")
		case '<':
			b.WriteString("&lt;")
		case '>':
			b.WriteString("&gt;")
		default:
			b.WriteRune(r)
		}
	}
	return b.String()
}

// buildAttributeString serializes attributes according
// to the Wrap contract.
func buildAttributeString(classes []string, attrs templ.Attributes) string {
	allClasses := make([]string, 0, len(classes))

	// component classes
	for _, c := range classes {
		if c != "" {
			allClasses = append(allClasses, c)
		}
	}

	otherAttrs := make([]string, 0, len(attrs))

	for k, v := range attrs {
		if k == "class" {
			if s, ok := v.(string); ok {
				allClasses = append(allClasses, strings.Fields(s)...)
			}
			continue
		}

		switch val := v.(type) {
		case nil:
			// omit
		case bool:
			if val {
				otherAttrs = append(otherAttrs, k)
			}
		default:
			str := escapeAttribute(fmt.Sprint(val))
			otherAttrs = append(otherAttrs, k+`="`+str+`"`)
		}
	}

	var out []string

	if len(allClasses) > 0 {
		out = append(out, `class="`+strings.Join(allClasses, " ")+`"`)
	}

	out = append(out, otherAttrs...)

	if len(out) == 0 {
		return ""
	}

	return " " + strings.Join(out, " ")
}

// Wrap — low-level HTML wrapper primitive.
//
// Wrap is a low-level HTML serializer with escaping
// and boolean attribute semantics.
//
// MUST NOT be used directly by application code.
func Wrap(p WrapProps, content Items) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var3 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var3 == nil {
			templ_7745c5c3_Var3 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		attrString := buildAttributeString(p.Classes, p.Attr)
		templ_7745c5c3_Err = Html("<"+p.Tag+attrString+">").Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = content.Render().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = Html("</"+p.Tag+">").Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
